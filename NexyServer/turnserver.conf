# Coturn TURN/STUN server configuration for Nexy

# Listening port for STUN/TURN
listening-port=3478

# TLS listening port (for secure connections)
tls-listening-port=5349

# Listening IP address
listening-ip=0.0.0.0

# External IP address (for NAT traversal)
# This will be set via environment variable
# external-ip=YOUR_PUBLIC_IP

# Relay IP address
relay-ip=0.0.0.0

# Verbose logging
verbose

# Fingerprint in TURN messages
fingerprint

# Use long-term credentials mechanism
lt-cred-mech

# Realm for authentication
realm=nexy.local

# Static user credentials (username:password)
user=nexy:nexy_turn_password

# Allow loopback addresses for local development
# no-loopback-peers is deprecated, commenting out

# Don't use multicast addresses for relaying
# no-multicast-peers is deprecated, commenting out

# Deny peers from private IP ranges (for production)
# For local development, we comment these out
# denied-peer-ip=10.0.0.0-10.255.255.255
# denied-peer-ip=172.16.0.0-172.31.255.255
# denied-peer-ip=192.168.0.0-192.168.255.255

# Allow loopback addresses for local development
allow-loopback-peers

# Maximum bytes per allocation
max-bps=1000000

# Maximum bytes per user
bps-capacity=0

# Total allocation quota
total-quota=100

# User quota
user-quota=50

# Minimum port for relay
min-port=49160
max-port=49200

# Logging - use syslog instead of file for Docker
syslog

# Disable CLI
no-cli

# Enable STUN
stun-only=false

# Process runs as root in Docker - comment out user settings
# proc-user=turnserver
# proc-group=turnserver

# Certificate paths (for TLS)
# For local development, we'll generate self-signed certs
# cert=/etc/coturn/certs/cert.pem
# pkey=/etc/coturn/certs/key.pem

# Disable TLS for local development
no-tls
no-dtls

# Server name
server-name=nexy-turn

# WebRTC compatible settings
mobility

# Disable short term credentials
# no-stun

# Enable prometheus metrics
# prometheus

# CLI password (commented out since CLI is disabled)
# cli-password=nexycli
